<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVENT TICKET</title>
    <style>
        /* Your CSS styles here */
        popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 20px;
            border-radius: 5px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <section class="h-100 h-custom">
        <div class="container h-100 py-5">
            <div class="row d-flex justify-content-center align-items-center h-100">
                <div class="col">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col" class="h5">EVENT TICKET</th>
                                    <th scope="col">Format</th>
                                    <th scope="col">Quantity</th>
                                    <th scope="col">Price</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <img src="img/general1.jpg" class="img-fluid rounded-3" style="width: 120px;" alt="General Ticket">
                                        <div class="flex-column ms-4">
                                            <p class="mb-2">GENERAL TICKET</p>
                                            <p class="mb-0">31 Dec, 2023 FNB Stadium, Johannesburg</p>
                                        </div>
                                    </td>
                                    <td>Format</td>
                                    <td>
                                        <input type="number" id="generalQuantity" value="0" min="0">
                                    </td>
                                    <td id="generalPrice">ZAR0</td>
                                </tr>
                                <tr>
                                    <td>
                                        <img src="img/vip1.jpg" class="img-fluid rounded-3" style="width: 120px;" alt="VIP Ticket">
                                        <div class="flex-column ms-4">
                                            <p class="mb-2">VIP TICKET</p>
                                            <p class="mb-0">31 Dec, 2023 FNB Stadium, Johannesburg</p>
                                        </div>
                                    </td>
                                    <td>Format</td>
                                    <td>
                                        <input type="number" id="vipQuantity" value="0" min="0">
                                    </td>
                                    <td id="vipPrice">ZAR0</td>
                                </tr>
                                <tr>
                                    <td colspan="3">Shipping</td>
                                    <td id="shippingPrice">ZAR150</td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="3">Total</td>
                                    <td id="totalPrice">ZAR0</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-6">
                <h2>Payment Information</h2>
                <form>
                    <!-- Payment method selection -->
                    <div class="mb-3">
                        <label for="paymentMethod">Select Payment Method:</label>
                        <select id="paymentMethod" class="form-select" required>
                            <option value="creditCard">Credit Card</option>
                            <option value="debitCard">Debit Card</option>
                            <option value="paypal">PayPal</option>
                        </select>
                    </div>

                    <!-- Name on Card -->
                    <div class="mb-3">
                        <label for="nameOnCard">Name on Card:</label>
                        <input type="text" id="nameOnCard" class="form-control" required>
                    </div>

                    <!-- Card Number -->
                    <div class="mb-3">
                        <label for="cardNumber">Card Number:</label>
                        <input type="text" id="cardNumber" class="form-control" required>
                    </div>

                    <!-- Expiration Date -->
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="expirationMonth">Expiration Month:</label>
                            <input type="text" id="expirationMonth" class="form-control" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="expirationYear">Expiration Year:</label>
                            <input type="text" id="expirationYear" class="form-control" required>
                        </div>
                    </div>

                    <!-- CVV -->
                    <div class="mb-3">
                        <label for="cvv">CVV:</label>
                        <input type="text" id="cvv" class="form-control" required>
                    </div>

                    <!-- Checkout Button -->
                    <button type="button" id="checkoutButton" class="btn btn-primary">Checkout</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Popup Message -->
    <div id="popup" class="popup">
        Validating payment...
    </div>

    <script>
        class Ticket {
            constructor(price, quantityInputId, priceCellId) {
                this.price = price;
                this.quantityInput = document.getElementById(quantityInputId);
                this.priceCell = document.getElementById(priceCellId);
                this.quantityInput.addEventListener("input", this.calculateTotal.bind(this));
            }

            calculateTotal() {
                const quantity = parseInt(this.quantityInput.value);
                const total = quantity * this.price;
                this.priceCell.textContent = `ZAR${total}`;
                this.updateTotal();
            }

            updateTotal() {
                const generalTotal = parseInt(document.getElementById("generalPrice").textContent.replace("ZAR", ""));
                const vipTotal = parseInt(document.getElementById("vipPrice").textContent.replace("ZAR", ""));
                const shippingPrice = 150; // R150
                const total = generalTotal + vipTotal + shippingPrice;
                document.getElementById("totalPrice").textContent = `ZAR${total}`;
            }
        }

        class PaymentForm {
            constructor() {
                this.paymentMethodSelect = document.getElementById("paymentMethod");
                this.nameOnCardInput = document.getElementById("nameOnCard");
                this.cardNumberInput = document.getElementById("cardNumber");
                this.expirationMonthInput = document.getElementById("expirationMonth");
                this.expirationYearInput = document.getElementById("expirationYear");
                this.cvvInput = document.getElementById("cvv");
                this.checkoutButton = document.getElementById("checkoutButton");

                this.paymentMethodSelect.addEventListener("change", this.handlePaymentMethodChange.bind(this));
                this.checkoutButton.addEventListener("click", this.handleCheckout.bind(this));
            }

            handlePaymentMethodChange() {
                // You can add logic here to show/hide payment-related fields based on the selected method
            }

            handleCheckout() {
                // Show the validating payment popup
                const popup = document.getElementById("popup");
                popup.style.display = "block";

                // Simulate a 10-second delay (10000 milliseconds)
                setTimeout(() => {
                    // After the delay, redirect to gateway.html
                    window.location.href = "gateway.html";
                }, 10000);

                // You can add payment validation logic here if needed.
            }
        }


        const generalTicket = new Ticket(4500, "generalQuantity", "generalPrice");
        const vipTicket = new Ticket(7000, "vipQuantity", "vipPrice");

        const paymentForm = new PaymentForm(); 
    </script>
</body>
</html>